<?xml version="1.0" encoding="utf-8"?>
<modification>
	<name>PavoThemer</name>
	<code>pavothemer</code>
	<version>1.0.0</version>
	<author>Pavotheme</author>
	<link>http://www.pavothemes.com</link>
    <file path="admin/controller/common/column_left.php">
        <operation>
            <search><![CDATA[// Catalog]]></search>
            <add position="before"><![CDATA[
                // pavothemer language file
                $this->load->language('extension/module/pavothemer');

                // PavoThemer Settings menu
                $settings = array();
                // view settings panel
                if ( $this->user->hasPermission( 'access', 'extension/module/pavothemer/edit' ) ) {
                    $settings[] = array(
                        'name'     => $this->language->get('menu_settings_text'),
                        'href'     => $this->url->link('extension/module/pavothemer/edit', 'user_token=' . $this->session->data['user_token'], true),
                        'children' => array()   
                    );
                }

                // access customize
                if ( $this->user->hasPermission( 'access', 'extension/module/pavothemer/customize' ) ) {
                    $settings[] = array(
                        'name'     => $this->language->get('menu_customize_text'),
                        'href'     => $this->url->link('extension/module/pavothemer/customize', 'user_token=' . $this->session->data['user_token'], true),
                        'children' => array()   
                    );
                }

                $tools = array();
                if ( $this->user->hasPermission( 'access', 'extension/module/pavothemer/import' ) ) {
                    $tools[] = array(
                        'name'     => $this->language->get('menu_import_text'),
                        'href'     => $this->url->link('extension/module/pavothemer/import', 'user_token=' . $this->session->data['user_token'], true),
                        'children' => array()   
                    );
                }
                if ( $this->user->hasPermission( 'access', 'extension/module/pavothemer/export' ) ) {
                    $tools[] = array(
                        'name'     => $this->language->get('menu_export_text'),
                        'href'     => $this->url->link('extension/module/pavothemer/export', 'user_token=' . $this->session->data['user_token'], true),
                        'children' => array()   
                    );
                }

                // view settings panel
                if ( $this->user->hasPermission( 'access', 'extension/module/pavothemer/import' ) || $this->user->hasPermission( 'access', 'extension/module/pavothemer/export' ) ) {
                    $settings[] = array(
                        'name'     => $this->language->get('menu_tool_text'),
                        'href'     => '',
                        'children' => $tools
                    );
                }

                if ( $settings ) {
                    $data['menus'][] = array(
                        'id'       => 'pavothemer',
                        'icon'     => 'fa fa-cog fw',
                        'name'     => $this->language->get( 'heading_title' ),
                        'href'     => '',
                        'children' => $settings
                    );
                }
                // End PavoThemer Settings menu
            ]]></add>
        </operation>
    </file>
    <file path="catalog/controller/common/header.php">
        <operation>
            <search><![CDATA[return $this->load->view('common/header', $data);]]></search>
            <add position="replace"><![CDATA[
                // pavothemer header layout file
                $data['pavothemer_theme_width'] = $this->config->get( 'pavothemer_theme_width' );
                $data['pavothemer_layout']      = $this->config->get( 'pavothemer_layout' );
                $header = $this->config->get( 'pavothemer_header_layout' );
                if ( ! $header ) {
                    return $this->load->view('common/header', $data);
                } else {
                    return $this->load->view('common/' . $header, $data);
                }
            ]]></add>
        </operation>
    </file>
    <file path="catalog/controller/common/footer.php">
        <operation>
            <search><![CDATA[return $this->load->view('common/footer', $data);]]></search>
            <add position="replace"><![CDATA[
                // pavothemer footer layout file
                $footer = $this->config->get( 'pavothemer_footer_layout' );
                if ( ! $footer ) {
                    return $this->load->view('common/footer', $data);
                } else {
                    return $this->load->view('common/' . $footer, $data);
                }
            ]]></add>
        </operation>
    </file>
    <file path="catalog/controller/product/product.php">
        <operation>
            <search><![CDATA[$this->response->setOutput($this->load->view('product/product', $data));]]></search>
            <add position="replace"><![CDATA[
                // pavothemer product layout file
                $layout = $this->config->get( 'pavothemer_product_layout' );
                if ( ! $layout ) {
                    $this->response->setOutput($this->load->view('product/product', $data));
                } else {
                    $this->response->setOutput($this->load->view('product/' . $layout, $data));
                }
            ]]></add>
        </operation>
    </file>
    <file path="catalog/controller/product/category.php">
        <operation>
            <search><![CDATA[$this->response->setOutput($this->load->view('product/category', $data));]]></search>
            <add position="replace"><![CDATA[
                // pavothemer category layout file
                $layout = $this->config->get( 'pavothemer_category_layout' );
                if ( ! $layout ) {
                    $this->response->setOutput($this->load->view('product/category', $data));
                } else {
                    $this->response->setOutput($this->load->view('product/' . $layout, $data));
                }
            ]]></add>
        </operation>
    </file>
    <file path="catalog/view/theme/*/template/common/header*.twig">
        <operation>
            <search><![CDATA[</head>]]></search>
            <add position="before"><![CDATA[
                {% if ( pavothemer_product_layout and pavothemer_product_layout != 'auto' ) %}
                    <style>.container{max-width:{{ pavothemer_product_layout }}; width:auto;}</style>
                {% endif %}
            ]]></add>
        </operation>
    </file>
</modification>